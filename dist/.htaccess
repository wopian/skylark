<IfModule mod_rewrite.c>
  Options +FollowSymLinks -MultiViews

  RewriteEngine On

  RewriteCond %{HTTP_HOST} ^(www\.)(.+) [OR]
  RewriteCond %{HTTPS} off
  RewriteCond %{HTTP_HOST} ^(www\.)?(.+)
  RewriteRule ^ https://%2%{REQUEST_URI} [R=301,L]

  # RewriteBase /

  # Redirects /users|/covers
  RewriteCond  %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d

  RewriteRule ^sitemap.xml$ sitemap.php [L]

  RewriteRule ^info /assets/modules/info/info.php [NC,L]
  RewriteRule ^status http://uptime.statuscake.com/?TestID=AvWM56tKLB [NC,L]

  RewriteRule ^([A-Za-z0-9_-]+)/library/?$ /library.php?user=$1 [NC,L]
  RewriteRule ^([A-Za-z0-9_-]+)/library/([A-Za-z0-9-]+)/?$ /library.php?user=$1&status=$2 [NC,L]
  RewriteRule ^([A-Za-z0-9_-]+)/compare/([A-Za-z0-9-]+)/?$ /compare.php?user=$1&user2=$2 [NC,L]
  # RewriteRule ^([A-Za-z0-9_-]+)/cover/?$ /cover.php [NC,L]
  RewriteRule ^([A-Za-z0-9_-]+)/?$ /users.php?user=$1 [NC,L]

</IfModule>
